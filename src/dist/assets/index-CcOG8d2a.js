import{_ as C,a as p,o as B,g as f,q as t,u as s,t as U,n as k,v as r,w as n,F as h,s as F,e as c,j as I,B as M,ac as N}from"./index-Du4dCbfO.js";import{E as $,a as S}from"./el-form-item-Dz8Wc4xe.js";import{E as j}from"./el-button-M656iEmA.js";import{E as D}from"./el-input-Bo7UyxaJ.js";import{u as L,a as T}from"./user-CW08ZWUW.js";import{q as A,d as G}from"./vid-C-zc31tL.js";import{E as _}from"./index-C1fdLA7_.js";import{E as H}from"./constants-D2akMa4K.js";import"./axios-BqNK95tu.js";const J={class:"userpage"},K={class:"info"},O=["src"],P={class:"name"},Q={class:"tabbar"},R={key:0,class:"setinfo"},W={key:1,class:"videolist"},X={class:"item"},Y=["src"],Z=["onClick"],ee={__name:"index",setup(se){const a=L(),m=p("user"),o=p({username:"",nickname:"",user_pic:"",phonenumber:"",emal:"",id:""}),v=p(),V={nickname:[{required:!0,message:"请输入昵称",trigger:"blur"}],user_pic:[{required:!0,message:"请输入头像",trigger:"blur"}],phonenumber:[{required:!0,message:"请输入手机号",trigger:"blur"}],emal:[{required:!0,message:"请输入邮箱",trigger:"blur"}]},b=p(!1);async function x(){if(!v.value)return _.error("不存在!");v.value.validate(async(i,e)=>{i?(b.value=!0,(await T(o.value)).status==200?(_.success("保存成功!"),a.info.nickname=o.value.nickname,a.info.user_pic=o.value.user_pic,a.info.phonenumber=o.value.phonenumber,a.info.emal=o.value.emal):_.error("保存失败!"),b.value=!1):_.error("请填写完整信息后提交!")})}function y(i,e){G({url:i}).then(()=>{g.value.splice(e,1),_.success("取消收藏成功")})}const g=p([]);return B(async()=>{o.value={username:a.info.username,nickname:a.info.nickname,user_pic:a.info.user_pic,phonenumber:a.info.phonenumber,emal:a.info.emal,id:a.info.id};const i=await A({createBy:a.info.id});g.value=i.data,console.log(i)}),(i,e)=>{const u=D,d=S,E=j,z=$,q=H;return c(),f("div",J,[t("div",K,[t("img",{src:s(a).info.user_pic?s(a).info.user_pic:"https://video.bbszr.com/course/206a98f0-4686-4215-bd27-3234805188a5.png",class:"imgge"},null,8,O),t("div",P,U(s(a).info.nickname||"匿名用户"),1)]),t("div",Q,[t("div",{class:k(["title",{active:s(m)=="user"}]),onClick:e[0]||(e[0]=l=>m.value="user")}," 个人信息 ",2),t("div",{class:k(["title",{active:s(m)=="my"}]),onClick:e[1]||(e[1]=l=>m.value="my")}," 我的收藏 ",2)]),s(m)=="user"?(c(),f("div",R,[r(z,{model:s(o),rules:V,"label-width":"75px",style:{"max-width":"600px"},ref_key:"formref",ref:v},{default:n(()=>[r(d,{label:"账号:"},{default:n(()=>[r(u,{size:"large",modelValue:s(o).username,"onUpdate:modelValue":e[2]||(e[2]=l=>s(o).username=l),clearable:"",disabled:!0},{prefix:n(()=>e[7]||(e[7]=[])),_:1},8,["modelValue"])]),_:1}),r(d,{label:"昵称:",prop:"nickname"},{default:n(()=>[r(u,{size:"large",modelValue:s(o).nickname,"onUpdate:modelValue":e[3]||(e[3]=l=>s(o).nickname=l),clearable:"",placeholder:"请输入昵称"},{prefix:n(()=>e[8]||(e[8]=[])),_:1},8,["modelValue"])]),_:1}),r(d,{label:"头像:",prop:"user_pic"},{default:n(()=>[r(u,{size:"large",modelValue:s(o).user_pic,"onUpdate:modelValue":e[4]||(e[4]=l=>s(o).user_pic=l),clearable:"",placeholder:"请输入可访问的url"},{prefix:n(()=>e[9]||(e[9]=[])),_:1},8,["modelValue"])]),_:1}),r(d,{label:"邮箱:",prop:"emal"},{default:n(()=>[r(u,{size:"large",modelValue:s(o).emal,"onUpdate:modelValue":e[5]||(e[5]=l=>s(o).emal=l),clearable:"",placeholder:"请输入邮箱"},{prefix:n(()=>e[10]||(e[10]=[])),_:1},8,["modelValue"])]),_:1}),r(d,{label:"手机号:",prop:"phonenumber"},{default:n(()=>[r(u,{size:"large",modelValue:s(o).phonenumber,"onUpdate:modelValue":e[6]||(e[6]=l=>s(o).phonenumber=l),clearable:"",placeholder:"请输入手机号"},{prefix:n(()=>e[11]||(e[11]=[])),_:1},8,["modelValue"])]),_:1}),r(d,null,{default:n(()=>[r(E,{loading:s(b),color:"#8454fb",size:"large",onClick:x},{default:n(()=>e[12]||(e[12]=[I(" 保 存 ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])):(c(),f("div",W,[(c(!0),f(h,null,F(s(g),(l,w)=>(c(),f("div",{class:"list",key:l.id},[t("div",X,[t("video",{src:l.url+"#t=0.05",controls:""},null,8,Y),t("div",{class:"icon",onClick:M(oe=>y(l.url,w),["stop"])},[r(q,{style:{"font-size":"25px"}},{default:n(()=>[r(s(N))]),_:1})],8,Z)])]))),128))]))])}}},pe=C(ee,[["__scopeId","data-v-5c7a25d2"]]);export{pe as default};
