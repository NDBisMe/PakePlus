import{_ as C,l as I,a as c,o as L,g as v,q as o,t as E,u as t,n as T,h as Y,v as i,w as f,e as g,a4 as N,ag as h,j as R,ab as j}from"./index-Du4dCbfO.js";import{E as B}from"./el-button-M656iEmA.js";import{a as U}from"./axios-BqNK95tu.js";import{E as V}from"./constants-D2akMa4K.js";const O={class:"wallpaper-content"},S={class:"wallpaper-header"},X={class:"wallpaper-image-container"},z=["src"],D={key:0,class:"loading-container"},q={class:"wallpaper-buttons"},J={class:"icons"},M={class:"back"},$={__name:"index",setup(A){const b=I(),r=c(""),s=c(!1),m=c(""),d=c(""),w=c([]),u=()=>{s.value=!1,U("/xiarou/api"+m.value,{method:"get",timeout:3e4}).then(e=>{w.value.push(e.data.data),r.value=e.data.data,s.value=!0}).catch(e=>{console.log(e),s.value=!0})},_=async()=>{try{const a=await(await fetch(r.value)).blob(),l=window.URL.createObjectURL(a),n=document.createElement("a");n.href=l,n.download="random-image.jpg",document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(l),document.body.removeChild(n)}catch(e){console.error("下载失败:",e)}};function y(){b.go(-1)}const p=c({clientX:0,clientY:0});function k(e){const a=e.changedTouches[0].clientY-p.value.clientY;(a>100||a<-100)&&u()}function x(e){p.value.clientX=e.changedTouches[0].clientX,p.value.clientY=e.changedTouches[0].clientY}return L(()=>{const e=JSON.parse(localStorage.getItem("api"));m.value=e.api,d.value=e.name,document.title=d.value,u()}),(e,a)=>{const l=B,n=V;return g(),v("div",{class:"wallpaper-container",onTouchstart:x,onTouchend:k},[o("div",O,[o("div",S,[o("h3",null,E(t(d)),1)]),o("div",X,[a[2]||(a[2]=o("div",{class:"image-overlay"},null,-1)),o("img",{src:t(r),alt:"随机图片",class:T({"fade-in":t(s)}),onLoad:a[0]||(a[0]=F=>s.value=!0)},null,42,z),t(s)?Y("",!0):(g(),v("div",D,a[1]||(a[1]=[o("div",{class:"loading-spinner"},null,-1)])))]),o("div",q,[i(l,{icon:t(N),type:"primary",onClick:u,color:"#2563eb",plain:""},null,8,["icon"]),i(l,{type:"primary",icon:t(h),onClick:_,color:"#2563eb",plain:""},null,8,["icon"])]),o("div",J,[i(n,{onClick:_},{default:f(()=>[i(t(h))]),_:1})]),o("div",M,[i(l,{icon:t(j),color:"transparent",type:"primary",size:"default",onClick:y},{default:f(()=>a[3]||(a[3]=[R("返回")])),_:1},8,["icon"])])])],32)}}},Q=C($,[["__scopeId","data-v-c0e6d7c2"]]);export{Q as default};
